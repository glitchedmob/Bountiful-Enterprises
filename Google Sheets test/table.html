<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <style type="text/css">
    .center div img {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    body {
      background-color: #DFDFDF;
    }

    .thumbnail {
      background-color: #DFDFDF;
    }

    .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th, .table-bordered, .thumbnail {
      border: 1px solid #BFBFBF;
    }

  </style>
</head>
<body>

<div class="container">
  <h2>Projects</h2>            
  <div class="project-list">
    
  </div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript"> 
$(document).ready(function() {  
  $(function listProjects() {    
    $.getJSON( "https://spreadsheets.google.com/feeds/list/15V657-Bi3arTLHvFJfbhe_UT3-lIcxKRST3y38bT0NY/od6/public/values?alt=json-in-script&callback=?",
      function (data) {
        var year = "2009";
        $.each(data.feed.entry, function(i,entry) { 

            var item = '<span style="display:none" >' + entry.id.$t + '</span>';
            var number = '<span style="display:none" >' + entry.id.$t + '</span>';
            
            if (entry.gsx$year.$t==='') {
              item += '<td>'+entry.gsx$name.$t+'</td><td>' + entry.gsx$city.$t+'</td><td>' + entry.gsx$state.$t+'</td><td>' + entry.gsx$tons.$t+'</td>';  
            } else {
              year = entry.gsx$year.$t;
              $('div.project-list').append('<h2 class="text-center"> Year: '+year+' - '+entry.gsx$total.$t+' tons</h2><div class="row"><div class="col-md-6"><table class="table table-bordered"><thead><tr><th>Job</th><th>City</th><th>State</th><th>Weight</th></tr></thead><tbody id="'+year+'"></tbody></table></div><div class="col-md-6 center v-center" id="'+year+'-pics"></div><div>');
            }

            if (entry.gsx$images.$t!='') {
              $('#'+year+'-pics').append('<div class="thumbnail"><img src="'+entry.gsx$images.$t+'"><div class="caption"><p>'+entry.gsx$description.$t+'</p></div></div>');  
            }

            if (entry.gsx$name.$t!='') {

            }       
            $('#'+year).append('<tr>'+item+'</tr>');                 
            });
        });
    });
});
</script>

</body>
</html>
